resp_body_json(resp)
type(resp_body_json(resp)_
type(resp_body_json(resp))
typeof(resp_body_json(resp))
mmode(resp_body_json(resp))
mode(resp_body_json(resp))
value(resp_body_json(resp))
class(resp_body_json(resp))
resp_body_json(resp)
json <- resp_body_json(resp)
json-resp <- resp_body_json(resp)
json_resp <- resp_body_json(resp)
rm(json
)
json_resp
fromJSON(json_resp)
json_resp <- resp_body_raw(resp)
fromJSON(json_resp)
json_resp <- resp_body_string(resp)
fromJSON(json_resp)
typeof(fromJSON(json_resp))
class(fromJSON(json_resp))
mode(fromJSON(json_resp))
class(fromJSON(json_resp))
length(fromJSON(json_resp))
mode(fromJSON(json_resp))
class(fromJSON(json_resp))
fromJSON(json_resp)[1]
fromJSON(json_resp)[1][1]
fromJSON(json_resp)[1]
fromJSON(json_resp)[1][[1]]
fromJSON(json_resp)[1][[1]][1]
fromJSON(json_resp)[2][[1]][1]
fromJSON(json_resp)[3][[1]][1]
fromJSON(json_resp)[1][[1]]
fromJSON(json_resp)[1][[1]][2]
fromJSON(json_resp)[2][[1]][2]
fromJSON(json_resp)[0][[1]][2]
fromJSON(json_resp)[3][[1]][2]
fromJSON(json_resp)[1][[1]][2]
fromJSON(json_resp)[1][[1]][2]
list_resp <- fromJSON(json_resp)
list_resp
list_resp
list_resp[24]
list_resp[24][[1]][2]
list_resp[1][[1]][2]
list_resp[1:24][[1]][2]
for (i in c(1:24)) {
}
list_resp[i][[1]][2]
i <- 1
for (i in c(1:24)) {
list_resp[i][[1]][2]
}
i <- 1
for (i in c(1:24)) {
print(list_resp[i][[1]][2])
}
i <- 2
for (i in c(2:24)) {
print(list_resp[i][[1]][2])
}
time_stamps <- list(23)
time_stamps <- list(23)
i <- 2
for (i in c(2:24)) {
time_stamps[i-1] <- list_resp[i][[1]][2]
}
time_stamps
time_stamps <- list(23)
i <- 2
for (i in c(2:24)) {
time_stamps[i-1] <- list_resp[i][[1]][[2]]
}
time_stamps
list_resp
list_resp[[24]]
list_resp[[24]][1]
list_resp[[24]][[1]]
list_resp[[24]][[2]]
time_stamps <- list(23)
i <- 2
for (i in c(2:24)) {
time_stamps[i-1] <- list_resp[[i]][[2]]
}
time_stamps
list_resp[[24]][[2]]
list_resp[[24]][[2]][1]
list_resp[[24]][[2]][[1]]
time_stamps[i-1] <- unlist(list_resp[[i]][[2]])
i <- 2
time_stamps <- list(23)
i <- 2
for (i in c(2:24)) {
time_stamps[i-1] <- unlist(list_resp[[i]][[2]])
}
time_stamps
list_resp[[24]][[2]][[1]]
list_resp[[24]][[2]]
list_resp[[24]][2]
list_resp[24][2]
list_resp[[24]]
list_resp[[24]][1]
list_resp[[24]][[1]]
View(list_resp)
list_resp[[2]]
list_resp[[8]]
second_value <- lapply(list_resp, `[[`, 2)
second_value
second_value <- lapply(list_resp, `[[`, 2)
second_value
time_stamps <- list(23)
?Extract
unlist(second_value)
time_stamps <- unlist(second_value)
time_stamps
time_stamps
time_stamps[2:24]
time_stamps <- time_stamps[2:24]
time_stamps
# Fetch vector of timestamps
time_stamps <- lapply(list_resp, `[[`, 2)
time_stamps <- unlist(second_value)
time_stamps <- time_stamps[2:24]
time_stamps
time_stamps
# View ferched vector
type(time_stamps)
# View ferched vector
class(time_stamps)
# View ferched vector
mode(time_stamps)
# View ferched vector
typeof(time_stamps)
# Libraries ---------------------------------------------------------------
library(tidyverse)
unload(tidyverse)
unload("tidyverse")
attached
attached()
attached?
# Settings ----------------------------------------------------------------
setwd("E:/Postgrad Projects/Czech Academy of Science Internship/resfun-panelists-code")
search()
library(lubridate)
time_stamps[1]
ymd_hms(time_stamps[1])
ymd_hms(time_stamps)
# Fetch vector of timestamps
time_stamps <- lapply(list_resp, `[[`, 2)
time_stamps <- unlist(second_value)
time_stamps <- time_stamps[2:24]
time_stamps <- ymd_hms(time_stamps)
# View fetched vector
time_stamps
# Plot date and times
meta_data <- data.frame(dates = time_stamps)
meta_data
# Plot date and times
meta_data <- tibble(dates = time_stamps)
meta_data
meta_data %>%
ggplot()+
geom_line(aes(x=dates))
# Libraries ---------------------------------------------------------------
library(tidyverse)
library(rvest)
library(magrittr)
# Settings ----------------------------------------------------------------
setwd("E:/Postgrad Projects/Czech Academy of Science Internship/resfun-panelists-code")
getwd()
rm(list=ls())
# URL encode link
url <- URLencode("https://wayback.webarchiv.cz/wayback/20211025232040/https://gacr.cz/o-ga-cr/poradni-organy/panely/",
reserved = FALSE)
url
url <- URLencode("https://wayback.webarchiv.cz/wayback/20221024073116/https://gacr.cz/o-ga-cr/poradni-organy/panely/",
reserved = FALSE)
url
library(rvest)
# Libraries ---------------------------------------------------------------
library(tidyverse)
library(rvest)
library(magrittr)
# Settings ----------------------------------------------------------------
setwd("E:/Postgrad Projects/Czech Academy of Science Internship/resfun-panelists-code")
getwd()
rm(list=ls())
# Encode URL
url <- URLencode("https://wayback.webarchiv.cz/wayback/20221024073116/https://gacr.cz/o-ga-cr/poradni-organy/panely/",
reserved = FALSE)
# Fetch html
resp <- read_html(url)
resp
# Make empty data frame to collect panel and panelists' names
data <- data.frame(matrix(ncol=2, nrow=0))
names(data) <- c(panelist, panel)
data
# Make empty data frame to collect panel and panelists' names
data <- data.frame(matrix(ncol=2, nrow=0))
names(data) <- c("panelist", "panel")
data
resp %>%
html_elements(xpath = "//h2")
# Encode URL
url <- URLencode("https://wayback.webarchiv.cz/wayback/20211025232040/https://gacr.cz/o-ga-cr/poradni-organy/panely/",
reserved = FALSE)
# Fetch html
resp <- read_html(url)
# Make empty data frame to collect panel and panelists' names
data <- data.frame(matrix(ncol=2, nrow=0))
names(data) <- c("panelist", "panel")
num_sections <- length(resp %>%
html_elements(xpath="//div[]"))
resp %>%
html_elements(xpath = "//h2")
resp %>%
html_elements(xpath = "//h2[text()='Složení hodnoticích panelů']")
resp %>%
html_elements(xpath = "//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons']")
# Count number of sections
num_sections <- length(resp %>%
html_elements(xpath = "//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons']"))
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", 1, "]/div[@class-'accordeon']")
resp %>%
html_elements(xpath=xpath_query)
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", 1, "]/div[@class='accordeon']")
resp %>%
html_elements(xpath=xpath_query)
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", 2, "]/div[@class='accordeon']")
resp %>%
html_elements(xpath=xpath_query)
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", 3, "]/div[@class='accordeon']")
resp %>%
html_elements(xpath=xpath_query)
# Loop over each section
i <- 1
for (i in c(1:1)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", 3, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
}
# Loop over each section
i <- 1
for (i in c(1:1)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
}
# Loop over each section
i <- 1
for (i in c(1:1)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
for (j in c(1:1)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']/label")
}
}
for (j in c(1:1)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']/label")
cat(resp %>%
html_elements(xpath=xpath_query) %>%
html_text2())
}
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
# Loop over each section
i <- 1
for (i in c(1:1)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
for (j in c(1:1)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]/label")
cat(resp %>%
html_elements(xpath=xpath_query) %>%
html_text2())
}
}
# Put together panel and panelists names
data_unit <- data.frame(panelist=panelist, panel=panel)
panelist <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Put together panel and panelists names
data_unit <- data.frame(panelist=panelist, panel=panel)
# Loop over each section
i <- 1
for (i in c(1:1)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
for (j in c(1:1)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]/label")
panel <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Fetch panelists' names
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]//ul/li")
panelist <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Put together panel and panelists names
data_unit <- data.frame(panelist=panelist, panel=panel)
}
}
data_unit
# Loop over each section
i <- 1
for (i in c(1:1)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
for (j in c(1:1)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]/label")
panel <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Fetch panelists' names
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]//ul/li")
panelist <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Put together panel and panelists names
data_unit <- data.frame(panelist=panelist, panel=panel)
# Add panel and panelists names to final data
data <- rbind(data, data_unit)
}
}
# Convert data to tibble
data <- as_tibble(data)
# Add year and url to data
data %<>%
mutate(year=2021, url=url)
# View data
data
# Make empty data frame to collect panel and panelists' names
data <- data.frame(matrix(ncol=2, nrow=0))
names(data) <- c("panelist", "panel")
# Count number of sections
num_sections <- length(resp %>%
html_elements(xpath = "//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons']"))
# Loop over each section
i <- 1
for (i in c(1:num_sections)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
for (j in c(1:num_panels)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]/label")
panel <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Fetch panelists' names
xpath_query <- paste0("//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]//ul/li")
panelist <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Put together panel and panelists names
data_unit <- data.frame(panelist=panelist, panel=panel)
# Add panel and panelists names to final data
data <- rbind(data, data_unit)
}
}
# Convert data to tibble
data <- as_tibble(data)
# Add year and url to data
data %<>%
mutate(year=2021, url=url)
# View data
data
# Save data as csv
write.csv(data, file="data/panelists_2021.csv")
# Libraries ---------------------------------------------------------------
library(tidyverse)
library(rvest)
library(magrittr)
# Settings ----------------------------------------------------------------
setwd("E:/Postgrad Projects/Czech Academy of Science Internship/resfun-panelists-code")
getwd()
rm(list=ls())
# Encode URL
url <- URLencode("https://wayback.webarchiv.cz/wayback/20221024073116/https://gacr.cz/o-ga-cr/poradni-organy/panely/",
reserved = FALSE)
# Fetch html
resp <- read_html(url)
# Make empty data frame to collect panel and panelists' names
data <- data.frame(matrix(ncol=2, nrow=0))
names(data) <- c("panelist", "panel")
# Count number of sections
num_sections <- length(resp %>%
html_elements(xpath = "//h2[text()='Složení hodnoticích panelů']/following::div[@class='accordeons']"))
resp %>%
html_elements(xpath="//h2")
resp %>%
html_elements(xpath = "//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons']")
# Count number of sections
num_sections <- length(resp %>%
html_elements(xpath = "//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons']"))
# Loop over each section
i <- 1
# Loop over each section
i <- 1
for (i in c(1:1)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
for (j in c(1:1)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]/label")
panel <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Fetch panelists' names
xpath_query <- paste0("//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]//ul/li")
panelist <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Put together panel and panelists names
data_unit <- data.frame(panelist=panelist, panel=panel)
# Add panel and panelists names to final data
data <- rbind(data, data_unit)
}
}
# Convert data to tibble
data <- as_tibble(data)
# Add year and url to data
data %<>%
mutate(year=2022, url=url)
# View data
data
# Make empty data frame to collect panel and panelists' names
data <- data.frame(matrix(ncol=2, nrow=0))
names(data) <- c("panelist", "panel")
# Count number of sections
num_sections <- length(resp %>%
html_elements(xpath = "//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons']"))
# Loop over each section
i <- 1
for (i in c(1:num_sections)) {
# Count number of panels in each section
xpath_query <- paste0("//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon']")
num_panels <- length(resp %>%
html_elements(xpath=xpath_query)
)
# Loop over each panel
j <- 1
for (j in c(1:num_panels)) {
# Fetch panel name
xpath_query <- paste0("//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]/label")
panel <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Fetch panelists' names
xpath_query <- paste0("//h2[text()='Členění vědních oborů do hodnoticích panelů']/following::div[@class='accordeons'][", i, "]/div[@class='accordeon'][", j, "]//ul/li")
panelist <- resp %>%
html_elements(xpath=xpath_query) %>%
html_text2()
# Put together panel and panelists names
data_unit <- data.frame(panelist=panelist, panel=panel)
# Add panel and panelists names to final data
data <- rbind(data, data_unit)
}
}
# Convert data to tibble
data <- as_tibble(data)
# Add year and url to data
data %<>%
mutate(year=2022, url=url)
# View data
data
# Save data as csv
write.csv(data, file="data/panelists_2022.csv")
